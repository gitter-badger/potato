branches:
  only:
    - master

language: cpp

compiler:
  - gcc

before_install:
  - sudo add-apt-repository --yes ppa:ubuntu-sdk-team/ppa
  - sudo apt-get update
  - sudo apt-get install cppcheck valgrind

before_script:
  - cppcheck code/editor code/potato code/test -I code/editor/ -I code/potato/ -I code/potato/inc -I code/potato/src -I code/potato/src/engine -I code/test/ --quiet --error-exitcode=1
  - cd build/
  - ./ready.sh
  - ./config.sh
  - cd ../

script:
  - cd build/
  - ./make.sh
  - cd ../

#after_success:
#  - valgrind --leak-check=yes out/bin/test

notifications:
  email:
    - alex@alexchi.me
  on_success: change
  on_failure: always

